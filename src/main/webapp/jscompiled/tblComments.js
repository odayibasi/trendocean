var comment_directive={"@id":'"comment"',"div.comment_part":{"post <- comment":{"div.comment_id":"post.commentID","img.cAvatarImg@src":"post.smallAvatarURL","a.cAvatarImgLink@href":"../#{post.sender}","a.cOwner":"post.sender","a.cOwner@href":"../#{post.sender}","span.comment-from-realname":"post.serderFullName","div.comment-content":function(a){return common_contentProcessing(a.item.commentText,CONTENT_PROCESS_FOR_ONE_QUESTION)},"a.coffeecup_deletebutton@style":function(a){return a.item.isRemovableByRequester==
"true"?"":"display:none"},"span.comment-from-qCreationDate":function(a){return common_getRemainingTime(new Date(a.item.creationDate*1))}}}},comment_template,display_comments=null,selected_comment=null,tblComments_data=null,tblComments_stripHTMLDIV=$('<div class="stripHTMLClass">text</div>');
function tblComments_initialize(){$(".comment_def").hide();comment_template=$("#cmt_part").compile(comment_directive);$("#cmt_part").hide();$("#tableLoadingIcon").hide();$(".coffeecup_deletebutton").live("click",function(){var a=$(this).parents(".comment_part").children(":first-child").children(":first-child").text();selected_comment=tblComments_getComment(a);selected_comment!=null&&$.ajax({url:"../api/comments/remove/"+onequestion_selectedQuestion.id+"/"+a,type:"POST",success:function(){tblComments_removeComment(a)},
error:function(b){notifyBar_display(ERR_MSG_WEBSERVICE+":"+b.status,ICON_URL_NOTIFY_WRONG)}});return false})}function tblComments_getComment(a){for(i=0;i<display_comments.length;i++){var b=display_comments[i];if(b.commentID==a)return b}return null}
function tblComments_addComment(a){if(tblComments_data==null)tblComments_data={};tblComments_data.comment=display_comments!=null?display_comments.concat(a):a;tblComments_renderComments(tblComments_data);onequestion_commentCount++;onequestion_displayCommentCount()}
function tblComments_removeComment(a){for(i=0;i<display_comments.length;i++)if(display_comments[i].commentID==a)break;display_comments.splice(i,1);tblComments_renderComments(tblComments_data);onequestion_commentCount--;onequestion_displayCommentCount()}
function tblComments_renderComments(a){var b=$(window).scrollTop();$("#static_que_section").empty();var c=document.createElement("div");c.setAttribute("id","que_section");document.getElementById("static_que_section").appendChild(c);tblComments_data=a;if(a==null){a={};display_comments=null}else display_comments=$.isArray(a.comment)?a.comment:Array(a.comment);a.comment=display_comments;$("#que_section").render(a,comment_template);$(window).scrollTop(b);$(".coffeecup_deletebutton").attr("title","delete comment")}
;
