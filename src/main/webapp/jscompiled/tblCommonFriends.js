var tblFollows_LoginedUser=cookie_get(COOKIE_USERNAME),tblFollows_Page="",follow_directive={"@id":'"user"',"div.follow_part":{"post <- user":{"div.follow_id":"post.username","a.badge@href":function(a){return a.item.username},"img.avatarImg@src":"post.smallAvatarURL","div.namebadge":"post.username","div.realname":"post.fullName","div.about":function(a){return ffCurrentAnchor==ANCHOR_INVITE?common_htmlStrip(a.item.about):common_contentProcess(a.item.count)+" mutual friends"},"a.badgeaddfollow@style":function(a){if(a.item.isFollowedByCurrentUser==
null)a.item.isFollowedByCurrentUser="false";return a.item.isFollowedByCurrentUser=="true"?"display:none":""},"a.badgeaddunfollow@style":function(){return"display:none"}}}},follow_template,display_follows=null,selected_follow=null,tblFollows_LoginedUserFolloweds=null,tblFollows_data=null;
function tblFollows_initialize(a,b){$("#btnMore").hide();$("#footer_nav").hide();if(a!=null)tblFollows_RelativePath=a;if(b!=null)tblFollows_Page=b;$(".follow_def").hide();follow_template=$("#foll_part").compile(follow_directive);$("#foll_part").hide();$("#tableLoadingIcon").hide();$(".badgeaddfollow").live("click",function(c){c.preventDefault();if(common_checkPOST()){c=$(this).parents(".follow_part").children(":first-child").children(":first-child").text();selected_follow=tblFollows_getFollow(c);
selected_follow!=null&&$.ajax({url:"api/users/follow/"+selected_follow.username,async:false,type:"POST",success:function(){selected_follow.isFollowedByCurrentUser="true";tblFollows_renderFollows(tblFollows_data)},error:function(d){notifyBar_display(ERR_MSG_WEBSERVICE+":"+d.status,ICON_URL_NOTIFY_WRONG)}})}return false});$(".badgeaddunfollow").live("click",function(c){c.preventDefault();if(common_checkPOST()){c=$(this).parents(".follow_part").children(":first-child").children(":first-child").text();
selected_follow=tblFollows_getFollow(c);selected_follow!=null&&$.ajax({url:"api/users/follow/"+selected_follow.username,async:false,type:"DELETE",success:function(){selected_follow.isFollowedByCurrentUser="false";tblFollows_renderFollows(tblFollows_data)},error:function(d){notifyBar_display(ERR_MSG_WEBSERVICE+":"+d.status,ICON_URL_NOTIFY_WRONG)}})}return false})}function tblFollows_getFollow(a){for(i=0;i<display_follows.length;i++){var b=display_follows[i];if(b.username==a)return b}return null}
function tblFollows_removeFollow(a){for(i=0;i<display_follows.length;i++)if(display_follows[i].username==a)break;display_follows.splice(i,1);tblFollows_renderFollows(tblFollows_data)}
function tblFollows_renderFollows(a){var b=$(window).scrollTop();$("#static_que_section").html("<div id=que_section></div>");if(a==null){a={};display_follows=null}else display_follows=$.isArray(a.user)?a.user:Array(a.user);tblFollows_data=a;tblFollows_data.user=display_follows;$("#que_section").render(tblFollows_data,follow_template);$(window).scrollTop(b)};
